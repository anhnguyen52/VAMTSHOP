<app-header class="sticky top-0 z-50"></app-header>
<div>
    <div class="max-w-7xl mx-auto my-10">
        <p class="text-[30px] font-[400]">Shopping Cart</p>
        <div class="grid grid-cols-3 gap-10 my-5 p-4 rounded-lg">
            <div class="col-span-2 relative" >
                <h1 class="text-[25px] font-bold">Product</h1>
                <div class="border-[1px] border-gray-200"></div>
                <div class="absolute top-[110px] left-[350px] mt-2 mr-2">
                    <p *ngIf="listItems.length === 0" class="text-[16px] text-gray-600 ">Giỏ hàng đang trống</p>
                </div>
                <div class="flex flex-row gap-4 border-b-2" *ngFor="let product of listItems">
                    <div>
                        <img src="{{product.data.image_urls[0]}}" alt=""
                        class="w-[200px] " />
                    </div>
                    <div class="flex flex-col justify-around w-[500px]">
                        <div>
                            <h1 class="text-[20px] font-bold text-gray-800 mt-2">{{product.data.product_name}}</h1>
                        </div>
                        <div class="flex flex-row justify-between items-end max-w-[500px]">
                            <div>
                                <p class="text-gray-500 text-[14px]">Category: Bags</p>
                                <p class="text-gray-500 text-[14px]">Collection: Queening</p>
                            </div>
                            <p class="text-gray-500 text-[14px]">Price: <strong class="text-[16px]">{{formatCurrency(product.data.price * product.quantity)}} vnđ</strong></p>
                            <div class="flex items-center gap-2 mt-2 mb-[12px]">
                                <button *ngIf="product.quantity > 1" class="w-[28px] h-[28px] bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transitrion duration-300" 
                                    (click)="decreaseQuantity(product)">
                                    <fa-icon 
                                        [icon]="faMinus" 
                                        class="text-[18px]">
                                    </fa-icon>
                                </button>
                                <button *ngIf="product.quantity == 1" class="w-[28px] h-[28px] bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transitrion duration-300" 
                                (click)="removeItem(product)">
                                    <fa-icon 
                                        [icon]="faTrash" 
                                        class="text-[15px] ">
                                    </fa-icon>
                                </button>
                                <span class="text-[16px] font-bold text-gray-800">{{ product.quantity }}</span>
                                <button  class="w-[28px] h-[28px] bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition duration-300" 
                                (click)="increaseQuantity(product)"  [disabled]="product.quantity >= product.data.stock">
                                    <fa-icon 
                                        [icon]="faPlus" 
                                        class="text-[18px] transition duration-200">
                                    </fa-icon>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-span-1">
                <h1 class="text-[25px] font-bold">Order Summary</h1>
                <div class="border-[1px] border-gray-200"></div>
                <div class="mt-5">
                    <p class="text-[16px] text-gray-800">Subtotal: {{formatCurrency(subtotal)}} vnđ</p>
                    <p class="text-[16px] text-gray-800">
                        Shipping: {{ shipping > 0 ? formatCurrency(shipping) + ' vnđ' : 'Free' }}
                    </p>
                    <div class="border-t-2 border-gray-200 mt-4 pt-4">
                        <h1 class="text-[16px]  text-gray-800">Total: {{formatCurrency(totalPrice)}} vnđ</h1>
                    </div>
                    <div class="mt-4 flex flex-col gap-4" *ngIf="isLoggedIn">
                        <button class="w-full h-[40px] text-[14px] font-bold bg-black text-white
                        hover:bg-white hover:text-black hover:border-gray-950 hover:border-[4px] hover:scale-105 transtion duration-100">CHECKOUT</button>
                        <button class="w-full h-[40px] text-[14px] font-bold
                        hover:border-gray-950 hover:border-[4px] hover:scale-105 transition duration-200" (click)="goBackHome()">Continue Shopping</button>
                    </div>
                    <div *ngIf="!isLoggedIn" class="mt-4 flex flex-col gap-4">
                        <button class="w-full h-[40px] text-[14px] font-bold bg-black text-white
                        hover:bg-white hover:text-black hover:border-gray-950 hover:border-[4px] hover:scale-105 transtion duration-100">GUEST CHECKOUT</button>
                         <button class="w-full h-[40px] text-[14px] font-bold border-[4px] border-gray-950
                        hover:scale-105 transition duration-200" (click)="goToLogin()">LOGIN CHECKOUT</button>
                        <button class="w-full h-[40px] text-[14px] font-bold
                        hover:border-gray-950 hover:border-[4px] hover:scale-105 transition duration-200" (click)="goBackHome()">Continue Shopping</button>
                    </div>
                </div>
            </div>
        </div>
</div>
<app-footer></app-footer>